<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro</title>
    <link rel="icon" type="image/x-icon" href="../images/logo.png">
    <link rel="stylesheet" href="../css/style2.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script src="script.js"></script>
<script>
    function redirect_page() {
        // Obter os valores dos inputs
        const nome = document.getElementById("name_input").value;
        const email = document.getElementById("email_input").value;
        const senha = document.getElementById("pw_input").value;

        // Configurar o corpo da requisição
        const requestData = {
            nome: nome,
            email: email,
            senha: senha
        };

        // Fazer a requisição POST com axios
        axios.post("http://localhost/user", requestData)
            .then(response => {
                document.getElementById('message').textContent = 'Usuário cadastrado com sucesso!';
                document.getElementById('message').style.color = 'green';
                window.location.href = "/auth.html";
            })
            .catch(error => {
                document.getElementById('message').textContent = 'Erro ao cadastrar usuário.';
                document.getElementById('message').style.color = 'red';
                console.error(error);
            });


    }
</script>

<body>
    <nav>
        <div class="navbar_left">
            <a href="../index.html">Página Inicial</a>
            <a href="./list.html">Lista</a>
        </div>
        <div class="navbar_right">
            <a href="./auth.html">Entrar</a>
        </div>
    </nav>

    <section>
        <img src="../images/img_login.jpg" id="background">

        <div class="div_register">
            <img src="../images/logo.svg" id="logo">
            <h2>Preencha os campos abaixo para realizar seu cadastro!</h2>

            <form class="form_floating" method="POST">

                <label for="email_input">Email:</label>
                <input type="email" class="form_control" id="email_input" placeholder="Digite seu email aqui">

                <label for="name_input">Nome:</label>
                <input type="text" class="form_control" id="name_input" placeholder="Digite o nome do casal aqui">

                <label for="pw_input">Senha:</label>
                <input type="password" class="form_control" id="pw_input" placeholder="Digite sua senha aqui">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault" required>
                    <label class="form-check-label" for="flexCheckDefault">
                        Li e concordo com a <a href="">política de privacidade</a>
                    </label>
                </div>

                <button type="button" class="btn btn-primary" onclick="redirect_page()">Cadastrar</button>
            </form>
            <div id="message"></div>

        </div>
    </section>


</body>

</html>